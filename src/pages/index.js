import Head from 'next/head'
import Image from 'next/image'
import { Inter } from 'next/font/google'
import styles from '@/styles/Home.module.css'
import BannerSlider from '@/component/Home/BannerSlider'
import CallToAction from '@/component/Home/CallToAction'
import axios from 'axios'
import { apiBaseUrl, megaMenu } from '@/helpers/apiUrl'
import { useDispatch } from 'react-redux'
import { Navigation } from '@/store/reducers/SomeAuth'
import Consult from '@/component/Home/Consult'
import Insta from '@/component/Home/Insta'
import Newsletter from '@/component/Home/Newsletter'

const inter = Inter({ subsets: ['latin'] })

export default function Home({data}) {
  const dispatch= useDispatch();
  dispatch(Navigation(data)) 

  console.log("props",data)
  
  return (
    <>
      <Head>
        <title>Home - Belgium Webnet</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={`${styles.main} ${inter.className}`}>
      <BannerSlider/>
      <Consult/>
      <CallToAction/>

      <Insta/>
      <Newsletter/>
      </main>
    </>
  )
}

// export async function getServerSideProps() {
//   // const res = await fetch('https://api.github.com/repos/vercel/next.js')
//   // const repo = await res.json()
//   // return { props: { repo } }

//   // await axios.get("https://api.github.com/repos/vercel/next.js").then((res)=>{
//   //   return {
//   //     props: {
//   //       megamenu: res.json()
//   //     }
//   //   }
//   // })

//   // const {data1}= await axios.get(`${megaMenu}`)
//   // const dataJson = await data1.json()
//   // return {
//   //   props: {dataJson}
//   // }
//   // console.log("dataJson1",dataJson)

// // const {data}=  await axios.get(`${apiBaseUrl}/api/hello`);
// // const apires = await fetch(`${apiBaseUrl}/api/hello`)
// // const data = await apires.json()
// // console.log('data',apires);
// // // console.log("data11",data?.data)
// // return {
// //   props:{ da:'data' }
// // MegaMenu()
// }



export async function getServerSideProps() {
  try {
    // Make an HTTP request using Axios in getServerSideProps
    const response = await axios.get(megaMenu);
    const data = await response.data.data;
    // if(data){

    // }
    return {
      props: {
        data,
      },
    };
  } catch (error) {
    // Handle errors if the request fails
    console.error('Error fetching data:', error.message);

    // Pass an empty object or any default data to the component
    return {
      props: {
        data: {},
      },
    };
  }
}